generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String @id @default(uuid())
  email     String @unique
  telephone String
  password  String

  roles           Role             @default(user)
  token           String?
  meets           MeetEnrollment[]
  userPreferences UserPreferences?

  createdAt DateTime @default(now())
}

model Mentor {
  id String @id @default(uuid())

  email     String  @unique
  telephone String
  password  String
  name      String?
  image     String?
  position  String?
  biography String?

  meet           Meet[]
  meetEnrollment MeetEnrollment[]
  roles          Role             @default(mentor)
}

enum Role {
  administrator
  user
  mentor
}

model UserPreferences {
  id String @id @default(uuid())

  categories Category[]

  userId String @unique
  user   User   @relation(fields: [userId], references: [id])
}

model Category {
  id   String @id @default(uuid())
  name String

  subCategory    SubCategory?
  userPreference UserPreferences[]
}

model SubCategory {
  id   String @id @default(uuid())
  name String

  categoryId String   @unique
  category   Category @relation(fields: [categoryId], references: [id])
}

model Meet {
  id          String           @id @default(uuid())
  name        String
  meetDetails String?
  price       Decimal
  // Relation Fields
  reviews     Reviews[]
  members     MeetEnrollment[]

  mentorId String @unique
  mentor   Mentor @relation(fields: [mentorId], references: [id])
}

model MeetEnrollment {
  id        String   @id @default(uuid())
  createdAt DateTime @default(now())
  roles     Role
  room      String?

  // Relation Fields
  userId   String
  meetId   String
  mentorId String
  user     User   @relation(fields: [userId], references: [id])
  meet     Meet   @relation(fields: [meetId], references: [id])
  mentor   Mentor @relation(fields: [mentorId], references: [id])
}

model Reviews {
  id          String  @id @default(uuid())
  rating      Int
  title       String?
  description String

  meetId String @unique
  meet   Meet   @relation(fields: [meetId], references: [id])
}
